<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Secret Tap Bonus</title>
<link rel="stylesheet" href="/assets/css/style.css">
</head>
<body class="wrap center">
  <h2>Tap 3 times to claim bonus!</h2>
  <button id="tap" type="button" class="btn">Tap me</button>

  <script>
    let taps = 0;
    const need = 3;
    const params = new URLSearchParams(location.search);
    const group = params.get('group');
    const token = params.get('tag'); // now 'tag' holds the token ID

    document.getElementById('tap').addEventListener('click', () => {
      if (++taps >= need) {
        const returnUrl = `/checkpoint/${encodeURIComponent(token)}?group=${encodeURIComponent(group)}&bonus=multiTap`;
        location.href = returnUrl;
      }
    });
  </script>
</body>
</html>
